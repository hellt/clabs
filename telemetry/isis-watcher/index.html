<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Opensource catalog of containerlab based labs"><meta name=author content="Roman Dodin"><link href=../../security/gnmitls/ rel=prev><link href=../../automation/automation/ rel=next><link rel=icon href=../../images/vial.svg><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.9"><title>ISIS Watcher - Lab catalog</title><link rel=stylesheet href=../../assets/stylesheets/main.f2e4d321.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Manrope:300,300i,400,400i,700,700i%7CFira+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Manrope";--md-code-font:"Fira Mono"}</style><link rel=stylesheet href=../../stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","UA-101537614-4"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","UA-101537614-4",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=UA-101537614-4",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><!-- Determine title --><!-- The image needs to have an absolute URL --><!-- Open graph meta tags --><meta property=og:type content=website><meta property=og:title content="Lab catalog - ISIS Watcher"><meta property=og:description content="Opensource catalog of containerlab based labs"><meta property=og:url content=None><meta property=og:image content=Noneimages/containerlab_black.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1092><meta property=og:image:height content=954><!-- Twitter meta tags --><meta name=twitter:card content=summary_large_image><meta name=twitter:site content=@ntdvps><meta name=twitter:creator content=@ntdvps><meta name=twitter:title content="Lab catalog - ISIS Watcher"><meta name=twitter:description content="Opensource catalog of containerlab based labs"><meta name=twitter:image content=Noneimages/containerlab_black.png></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=cyan> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#is-is-watcher-tracking-is-is-topology-changes-in-real-time class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Lab catalog" class="md-header__button md-logo" aria-label="Lab catalog" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M342.6 9.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l9.4 9.4L28.1 342.6C10.1 360.6 0 385 0 410.5v5.5c0 53 43 96 96 96h5.5c25.5 0 49.9-10.1 67.9-28.1L448 205.3l9.4 9.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-32-32-96-96-32-32zM205.3 256 352 109.3l50.7 50.7-96 96H205.3z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Lab catalog </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> ISIS Watcher </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=cyan aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=black data-md-color-accent=cyan aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/hellt/clabs title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> hellt/clabs </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../rs/rs/ class=md-tabs__link> Routing & Switching </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../telemetry/ class=md-tabs__link> Telemetry </a> </li> <li class=md-tabs__item> <a href=../../automation/automation/ class=md-tabs__link> Automation </a> </li> <li class=md-tabs__item> <a href=../../security/security/ class=md-tabs__link> Security </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Lab catalog" class="md-nav__button md-logo" aria-label="Lab catalog" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M342.6 9.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l9.4 9.4L28.1 342.6C10.1 360.6 0 385 0 410.5v5.5c0 53 43 96 96 96h5.5c25.5 0 49.9-10.1 67.9-28.1L448 205.3l9.4 9.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-32-32-96-96-32-32zM205.3 256 352 109.3l50.7 50.7-96 96H205.3z"/></svg> </a> Lab catalog </label> <div class=md-nav__source> <a href=https://github.com/hellt/clabs title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> hellt/clabs </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Routing & Switching </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Routing & Switching </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../rs/rs/ class=md-nav__link> <span class=md-ellipsis> About </span> </a> </li> <li class=md-nav__item> <a href=../../rs/bgp-vpls/ class=md-nav__link> <span class=md-ellipsis> BGP VPLS Deep dive </span> </a> </li> <li class=md-nav__item> <a href=../../rs/cvx03/ class=md-nav__link> <span class=md-ellipsis> Cumulus Test Drive </span> </a> </li> <li class=md-nav__item> <a href=../../rs/cvx04/ class=md-nav__link> <span class=md-ellipsis> Cumulus In The Cloud </span> </a> </li> <li class=md-nav__item> <a href=../../rs/cvx05/ class=md-nav__link> <span class=md-ellipsis> Cumulus 5.x EVPN VXLAN BGP fabric </span> </a> </li> <li class=md-nav__item> <a href=../../rs/arista-bgp-evpn/ class=md-nav__link> <span class=md-ellipsis> Arista BGP EVPN </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Telemetry </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Telemetry </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../telemetry/ class=md-nav__link> <span class=md-ellipsis> About </span> </a> </li> <li class=md-nav__item> <a href=../../security/gnmitls/ class=md-nav__link> <span class=md-ellipsis> Securing gNMI with TLS </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> ISIS Watcher </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> ISIS Watcher </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#is-is-topology-watcher class=md-nav__link> <span class=md-ellipsis> IS-IS Topology Watcher </span> </a> <nav class=md-nav aria-label="IS-IS Topology Watcher"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#detected-network-events class=md-nav__link> <span class=md-ellipsis> Detected network events </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#supported-is-is-tlv class=md-nav__link> <span class=md-ellipsis> Supported IS-IS TLV </span> </a> </li> <li class=md-nav__item> <a href=#quickstart class=md-nav__link> <span class=md-ellipsis> Quickstart </span> </a> <nav class=md-nav aria-label=Quickstart> <ul class=md-nav__list> <li class=md-nav__item> <a href=#is-is-watcher-logs-location class=md-nav__link> <span class=md-ellipsis> IS-IS Watcher logs location </span> </a> </li> <li class=md-nav__item> <a href=#logs-sample-1 class=md-nav__link> <span class=md-ellipsis> Logs sample 1 </span> </a> </li> <li class=md-nav__item> <a href=#logs-sample-2 class=md-nav__link> <span class=md-ellipsis> Logs sample 2 </span> </a> </li> <li class=md-nav__item> <a href=#logs-sample-3-te class=md-nav__link> <span class=md-ellipsis> Logs sample 3. TE </span> </a> </li> <li class=md-nav__item> <a href=#links class=md-nav__link> <span class=md-ellipsis> Links </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Automation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Automation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../automation/automation/ class=md-nav__link> <span class=md-ellipsis> About </span> </a> </li> <li class=md-nav__item> <a href=../../automation/nuts-network-testing/ class=md-nav__link> <span class=md-ellipsis> Network Unit Testing With NUTS </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Security </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Security </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../security/security/ class=md-nav__link> <span class=md-ellipsis> About </span> </a> </li> <li class=md-nav__item> <a href=../../security/cmpv2/ class=md-nav__link> <span class=md-ellipsis> Certificate management with CMPv2 </span> </a> </li> <li class=md-nav__item> <a href=../../security/gnmitls/ class=md-nav__link> <span class=md-ellipsis> Securing gNMI with TLS </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#is-is-topology-watcher class=md-nav__link> <span class=md-ellipsis> IS-IS Topology Watcher </span> </a> <nav class=md-nav aria-label="IS-IS Topology Watcher"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#detected-network-events class=md-nav__link> <span class=md-ellipsis> Detected network events </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#supported-is-is-tlv class=md-nav__link> <span class=md-ellipsis> Supported IS-IS TLV </span> </a> </li> <li class=md-nav__item> <a href=#quickstart class=md-nav__link> <span class=md-ellipsis> Quickstart </span> </a> <nav class=md-nav aria-label=Quickstart> <ul class=md-nav__list> <li class=md-nav__item> <a href=#is-is-watcher-logs-location class=md-nav__link> <span class=md-ellipsis> IS-IS Watcher logs location </span> </a> </li> <li class=md-nav__item> <a href=#logs-sample-1 class=md-nav__link> <span class=md-ellipsis> Logs sample 1 </span> </a> </li> <li class=md-nav__item> <a href=#logs-sample-2 class=md-nav__link> <span class=md-ellipsis> Logs sample 2 </span> </a> </li> <li class=md-nav__item> <a href=#logs-sample-3-te class=md-nav__link> <span class=md-ellipsis> Logs sample 3. TE </span> </a> </li> <li class=md-nav__item> <a href=#links class=md-nav__link> <span class=md-ellipsis> Links </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=is-is-watcher-tracking-is-is-topology-changes-in-real-time>IS-IS watcher. Tracking IS-IS topology changes in Real-Time<a class=headerlink href=#is-is-watcher-tracking-is-is-topology-changes-in-real-time title="Permanent link">#</a></h1> <p><img alt="IS-IS watcher containerlab" src=https://gitlab.com/rdodin/pics/-/wikis/uploads/d164f3d0688a85ed89206c25d7be4bb4/CleanShot_2025-03-22_at_13.11.19_2x.png></p> <p>This lab consists of 6 FRR routers and a single IS-IS Watcher. Each router is pre-configured to be part of an IS-IS domain with different network types. Any topology changes detected by the IS-IS Watcher are logged in the file <code>watcher/watcher.log</code>. The logging capabilities can be enhanced with tools like ELK or Topolograph, enabling features such as searching changes by time and exporting data to message brokers, Zabbix, and more. For further details, refer to the Links page.</p> <h3 id=is-is-topology-watcher>IS-IS Topology Watcher<a class=headerlink href=#is-is-topology-watcher title="Permanent link">#</a></h3> <p>IS-IS Watcher is a monitoring tool of IS-IS topology changes for network engineers. It works via passively listening to IS-IS control plane messages through a specially established IS-IS adjacency between IS-IS Watcher and one of the network device. <em>It assists in analyzing incidents by determining the precise time and location of events, as well as their distribution across the network in a retrospective manner.</em> </p> <h4 id=detected-network-events>Detected network events<a class=headerlink href=#detected-network-events title="Permanent link">#</a></h4> <ul> <li>IS-IS neighbor adjacency Up/Down</li> <li>IS-IS link cost changes</li> <li>IS-IS networks appearance/disappearance from the topology</li> <li>IS-IS TE attributes:</li> <li>Administrative Group (color, resource class)</li> <li>Maximum Link Bandwidth</li> <li>Maximum Reservable Link Bandwidth</li> <li>Unreserved Bandwidth</li> <li>Traffic Engineering Default Metric</li> </ul> <h3 id=supported-is-is-tlv>Supported IS-IS TLV<a class=headerlink href=#supported-is-is-tlv title="Permanent link">#</a></h3> <table> <thead> <tr> <th>TLV name</th> <th>TLV</th> <th>subTLV</th> </tr> </thead> <tbody> <tr> <td>IS Reachability</td> <td>2</td> <td></td> </tr> <tr> <td>Extended IS Reachability (new)</td> <td>22</td> <td>3,6,8,9,10,11,12,13,18</td> </tr> <tr> <td>IPv4 Internal Reachability (old)</td> <td>128</td> <td></td> </tr> <tr> <td>IPv4 External Reachability (old)</td> <td>130</td> <td></td> </tr> <tr> <td>Extended IPv4 Reachability (new)</td> <td>135</td> <td></td> </tr> <tr> <td>IPv6 Reachability</td> <td>236</td> <td></td> </tr> </tbody> </table> <h2 id=quickstart>Quickstart<a class=headerlink href=#quickstart title="Permanent link">#</a></h2> <ol> <li><a href=https://containerlab.srlinux.dev/install/ >Install</a> containerlab.</li> <li> <p>Run the script to prepare environment:</p> <div class=highlight><pre><span></span><code>./prepare.sh
</code></pre></div> </li> <li> <p>Start the lab</p> <div class=highlight><pre><span></span><code>sudo clab deploy --topo frr01.clab.yml
</code></pre></div> </li> <li> <p>Check that Watcher is ready (usually it requires 10-15sec to be ready). Proceed to the next step once Watcher is ready. </p> <div class=highlight><pre><span></span><code>sudo docker logs clab-frr01-isis-watcher
</code></pre></div> <p>Expected output:</p> <div class=highlight><pre><span></span><code>lsdb_output:Area lab:
IS-IS Level-1 link-state database:
LSP ID                  PduLen  SeqNumber   Chksum  Holdtime  ATT/P/OL
0100.1001.0001.00-00 *    222   0x00000002  0x9611    1144    1/0/0
Protocols Supp
ISIS LSDB has been received
Sniffing packets on interface: eth1
</code></pre></div> </li> <li> <p>Start watching logs</p> <div class=highlight><pre><span></span><code>sudo tail -f watcher/watcher.log
</code></pre></div> </li> <li> <p>Change IS-IS settings on lab' routers. Connect to a router in another terminal</p> <div class=highlight><pre><span></span><code>sudo docker exec -it clab-frr01-router6 vtysh
</code></pre></div> <p>Change metric on the interface</p> <div class=highlight><pre><span></span><code>router6# conf t
router6(config)# int eth1
router6(config-if)# isis metric 66
</code></pre></div> <p>Add new stub network</p> <div class=highlight><pre><span></span><code>router6(config-if)# ip address 10.10.36.6/24
</code></pre></div> <p>Remove another one</p> <div class=highlight><pre><span></span><code>router6(config-if)# no ip address 3ffe::192:168:36:6/127
</code></pre></div> <p>Change unreserve bandwidth TE attribute on a link</p> <div class=highlight><pre><span></span><code>router6(config-if)# link-params
router6(config-link-params)# unrsv-bw 1 9+06
</code></pre></div> <p>assign <code>admin group</code> on a link</p> <div class=highlight><pre><span></span><code>router6(config-link-params)# admin-grp 0xaa
</code></pre></div> <p>Shutdown adjancency</p> <div class=highlight><pre><span></span><code>router6(config-if)# shutdown
</code></pre></div> </li> </ol> <h3 id=is-is-watcher-logs-location>IS-IS Watcher logs location<a class=headerlink href=#is-is-watcher-logs-location title="Permanent link">#</a></h3> <p>Available under <code>watcher</code> folder. To see them:</p> <div class=highlight><pre><span></span><code>sudo tail -f watcher/watcher.log
</code></pre></div> <h3 id=logs-sample-1>Logs sample 1<a class=headerlink href=#logs-sample-1 title="Permanent link">#</a></h3> <div class=highlight><pre><span></span><code>2023-01-01T00:00:00Z,demo-watcher,1,host,0200.1001.0002,down,0200.1001.0003,01Jan2023_00h00m00s_7_hosts,49.0002,12345
</code></pre></div> <ul> <li><code>2023-01-01T00:00:00Z</code> - event timestamp</li> <li><code>demo-watcher</code> - name of watcher</li> <li><code>1</code> - IS-IS level</li> <li><code>host</code> - event name: <code>host</code>, <code>network</code>, <code>metric</code>, <code>temetric</code></li> <li><code>0200.1001.0002</code> - event object. Watcher detected an event related to <code>0200.1001.0002</code> host</li> <li><code>down</code> - event status: <code>down</code>, <code>up</code>, <code>changed</code></li> <li><code>0200.1001.0003</code> - event detected by this node.</li> <li><code>01Jan2023_00h00m00s_7_hosts</code> - name of graph in Topolograph dashboard</li> <li><code>49.0002</code> - area number</li> <li><code>12345</code> - AS number</li> <li><code>10.1.23.3</code> - Local IP address of detected node <code>0200.1001.0003</code> (available in 2.0.15)</li> <li><code>10.1.23.2</code> - Remote IP address relative to the detected node <code>0200.1001.0003</code> (available in 2.0.16) <em>Summary: <code>0200.1001.0003</code> on the interface with <code>10.1.23.3</code> IP address detected that <code>0200.1001.0002</code> host went down at <code>2023-01-01T00:00:00Z</code> in IS-IS level 1 in area 49.0002 in AS 12345</em></li> </ul> <h3 id=logs-sample-2>Logs sample 2<a class=headerlink href=#logs-sample-2 title="Permanent link">#</a></h3> <div class=highlight><pre><span></span><code>2023-01-01T00:00:00Z,isis-watcher,2,metric,4ffe::192:168:23:2/127,changed,old_cost:10,new_cost:12,0200.1001.0002,stub,0200.1001.0002,01Jan2023_00h00m00s_7_hosts,49.0002,12345,external,1
</code></pre></div> <ul> <li><code>2023-01-01T00:00:00Z</code> - event timestamp</li> <li><code>isis-watcher</code> - name of watcher</li> <li><code>2</code> - IS-IS level</li> <li><code>metric</code> - event name: <code>host</code>, <code>network</code>, <code>metric</code>, <code>temetric</code></li> <li><code>4ffe::192:168:23:2/127</code> - event object. Watcher detected an event related to 4ffe::192:168:23:2/127` subnet</li> <li><code>changed</code> - event status: <code>down</code>, <code>up</code>, <code>changed</code></li> <li><code>10</code> - old cost</li> <li><code>12</code> - new cost</li> <li><code>0200.1001.0002</code> - event detected by this node.</li> <li><code>stub</code> - subnet type</li> <li><code>0200.1001.0002</code> - since it's a stub network it has router id of terminated node.</li> <li><code>01Jan2023_00h00m00s_7_hosts</code> - name of graph in Topolograph dashboard</li> <li><code>49.0002</code> - area number</li> <li><code>12345</code> - AS number</li> <li><code>external</code> - subnet type internal|external</li> <li><code>1</code> - subnet ext type 1|2. 0 for internal subnets <em>Summary: <code>0200.1001.0002</code> detected that metric of <code>4ffe::192:168:23:2/127</code> stub network changed from <code>10</code> to <code>12</code> at <code>2023-01-01T00:00:00Z</code> in IS-IS level 2</em></li> </ul> <h3 id=logs-sample-3-te>Logs sample 3. TE<a class=headerlink href=#logs-sample-3-te title="Permanent link">#</a></h3> <div class=highlight><pre><span></span><code>2024-12-29T13:20:50.398Z,
isis-watcher,1,temetric,0200.1001.0002,changed,0_17_19_20_21_22_26_29_30,1000000000,1000000000,1000000008_1000000016_1000000024_1000000032_1000000040_1000000048_1000000056,11223344,0200.1001.0003,2024-07-28T18:03:05Z,49.0001,01Jan2023_00h00m00s_7_hosts,10.1.23.3,10.1.23.2
</code></pre></div> <ul> <li><code>2023-01-01T00:00:00Z</code> - event timestamp</li> <li><code>demo-watcher</code> - name of watcher</li> <li><code>1</code> - IS-IS level</li> <li><code>temetric</code> - event name: <code>host</code>, <code>network</code>, <code>metric</code>, <code>temetric</code></li> <li><code>0200.1001.0002</code> - event object. Watcher detected an event related to <code>0200.1001.0002</code> host</li> <li><code>changed</code> - event status: <code>down</code>, <code>up</code>, <code>changed</code></li> <li><code>0_17_19_20_21_22_26_29_30</code> - 0, 17, 19, 20, 21, 22, 26, 29, 30 admin groups</li> <li><code>1000000000</code> - Maximum Link Bandwidth (Sub-TLV 9) bits per sec</li> <li><code>1000000000</code> - Maximum Reservable Link Bandwidth (Sub-TLV 10) bits per sec</li> <li><code>1000000008_1000000016_1000000024_1000000032_1000000040_1000000048_1000000056</code> - Unreserved Bandwidth (Sub-TLV 11) for priority 0,..7 bits per sec</li> <li><code>11223344</code> - Traffic Engineering Default Metric (Sub-TLV 18)</li> <li><code>0200.1001.0003</code> - event detected by this node.</li> <li><code>01Jan2023_00h00m00s_7_hosts</code> - name of graph in Topolograph dashboard</li> <li><code>49.0002</code> - area number</li> <li><code>12345</code> - AS number</li> <li><code>10.1.23.3</code> - Local IP address of detected node <code>0200.1001.0003</code> (available in 2.0.15)</li> <li><code>10.1.23.2</code> - Remote IP address relative to the detected node <code>0200.1001.0003</code> (available in 2.0.16)</li> </ul> <blockquote> <p><strong>Note</strong> log file should have <code>systemd-network:systemd-journal</code> ownership</p> </blockquote> <h3 id=links>Links<a class=headerlink href=#links title="Permanent link">#</a></h3> <ul> <li><a href=https://github.com/Vadims06/isiswatcher>IS-IS Watcher</a> - IS-IS topology tracker</li> </ul> <!-- Content footer --> <footer class="mdx-content__footer md-typeset"> <hr> <span class=twemoji> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M342.6 9.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l9.4 9.4L28.1 342.6C10.1 360.6 0 385 0 410.5v5.5c0 53 43 96 96 96h5.5c25.5 0 49.9-10.1 67.9-28.1L448 205.3l9.4 9.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-32-32-96-96-32-32zM205.3 256 352 109.3l50.7 50.7-96 96H205.3z"/></svg> </span> <hr> </footer> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <!--
  Copyright (c) 2016-2021 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Footer --> <footer class=md-footer> <!-- Link to previous and/or next page --> <nav class="md-footer__inner md-grid" aria-label=footer.title> <!-- Link to previous page --> <a href=../../security/gnmitls/ class="md-footer__link md-footer__link--prev" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Securing gNMI with TLS </div> </div> </a> <!-- Link to next page --> <a href=../../automation/automation/ class="md-footer__link md-footer__link--next" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> About </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <!-- Further information --> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <!-- Copyright and theme information --> <div class=md-footer-copyright> Made with <span class="twemoji heart"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14 20.408c-.492.308-.903.546-1.192.709-.153.086-.308.17-.463.252h-.002a.75.75 0 0 1-.686 0 16.709 16.709 0 0 1-.465-.252 31.147 31.147 0 0 1-4.803-3.34C3.8 15.572 1 12.331 1 8.513 1 5.052 3.829 2.5 6.736 2.5 9.03 2.5 10.881 3.726 12 5.605 13.12 3.726 14.97 2.5 17.264 2.5 20.17 2.5 23 5.052 23 8.514c0 3.818-2.801 7.06-5.389 9.262A31.146 31.146 0 0 1 14 20.408Z"/></svg> </span> by <a href=https://github.com/srl-labs/containerlab/graphs/contributors target=_blank rel=noopener> @hellt & contributors </a> </div> <!-- Social links --> <div class=md-social> <a href=https://github.com/hellt target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://twitter.com/ntdvps target=_blank rel=noopener title=twitter.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.top", "navigation.tabs", "search.suggest", "content.code.annotate", "content.code.copy", "content.code.select", "content.action.edit", "toc.follow", "content.tooltips", "navigation.indexes"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../assets/javascripts/bundle.8fd75fb4.min.js></script> </body> </html>